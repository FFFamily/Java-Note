# 对象和类

## 面向对象程序设计(OOP)

> 传统的结构化语言需要通过一系列的过程（算法）来解决问题（《算法+数据结构=程序》）
>
> 面向对象程序是由对象组成

- 多态
- 继承
- 封装
- 抽象
- 类
- 对象
- 实例
- 方法
- 重载

### 特性

封装性，多态性，继承性，（抽象性)

封装

就是将抽象型数据和基本数据类型封装在一起，构成一个独立的实体，只保留一些对外接口使之与外部发生联系，

用户无需知道对象内部的细节，但可以通过对象对外提供的接口来访问该对象。

优点

- 减少耦合，可以独立地开发、测试、优化、使用、理解和修改
- 利于维护，
- 提高性能

-----

继承

继承实现了 **IS-A** 关系

继承应该遵循里氏替换原则，子类对象必须能够替换掉所有父类对象



-----

多态

多态，顾名思义，表示一个对象具有多种的状态。具体表现为父类的引用指向子类的实例

多态分为编译时多态和运行时多态

- 编译时多态主要指方法的重载
- 运行时多态指程序中定义的对象引用所指向的具体类型在运行期间才确定

运行时多态有三个条件:

- 继承
- 覆盖(重写)
- 向上转型

-----



### 五大基本原则

单一职责原则，开放封闭原则，里氏替换原则，接口隔离原则，依赖倒置原则



### 优点

易维护、易复用、易扩展

由于面向对象有封装、继承、多态性的特性，可以设计出低耦合的系统，使系统更加灵活、更加易于维护



### 缺点

性能比面向过程低 



> **面向过程的语言优点**：性能比面向对象高，因为类调用时需要实例化，开销比较大，比较消耗资源
>
> **缺点**：没有面向对象易维护、易复用、易扩展



JAVA语言的特点（在《java程序设计习题精编》）

1.简单性：

2.面向对象：

3.分布式：java程序能通过url打开或者访问网络上的对象，就像访问本地文件

4.健壮：强类型，异常处理，内存自动回收

5.安全性：java有一个安全防范机制

6.体系结构中立：Java编译器通过生成与特定的计算机体系结构无关的字节码指令来实现这一特性

7.可移植：java的基本数据类型与硬件平台无关

8.解释型：Java解释器可以在任何一只了解释器的机器上执行Java字节码

9.高性能：

10.多线程：

11.动态:



## 类

### 概述

1，类是构造对象的模板或蓝图，它描述一类对象的行为和状态

2，创建对象的过程——是类的实例化

3，所有的类都是  `Object类` 的子类

###  封装

#### 概念

1，封装（Encapsulation）是指一种将抽象性函式接口的**实现细节部份包装、隐藏起来的方法**（隐藏对象的属性和实现细节，仅对外提供公共访问方式）

2，封装可以被认为是一个保护屏障，防止该类的代码和数据被外部类定义的代码随机访问

3，要访问该类的代码和数据，必须通过严格的接口控制

4，封装最主要的功能在于我们能修改自己的实现代码，而不用修改那些调用我们代码的程序片段

5，适当的封装可以让程式码更容易理解与维护，也加强了程式码的安全性

  

#### 步骤

1. 修改属性的可见性来限制对属性的访问（一般限制为private）

```java
private String name; 
private int age;
```

2. 对每个值属性提供对外的公共方法访问，也就是创建一对赋取值方法，用于对私有属性的访问

```java
public int getAge(){   
    return age;   
}  
public String getName(){   
    return name;   
} //以下是对外的公共访问，访问类中的私有属性   
public void setAge(int age){    
    this.age = age;    
}   
public void setName(String name){    
    this.name = name;    
}
```

采用 **this** 关键字是为了解决实例变量（private String name）和局部变量（setName(String name)中的name变量）之间发生的同名的冲突



**条件**：

1.一个私有的数据域

2.一个公共的域访问器方法（get方法）

3.一个公有的域更改器方法（set方法）



### 类的分类

1，基本类和不可变类

2，基本类分为普通类，抽象类，接口

- 普通类：使用 class 定义且不含有抽象方法的类
- 抽象类：使用 abstract class 定义的类，它可以含有或不含有抽象方法
- 接口：使用 interface 定义的类



### 类的三种关系

依赖（uses-a）：一个类的方法操纵另一个类的方法，我们就说一个类依赖于另一个类

> 尽可能的减少这种依赖关系的类——即减少类之间的耦合度
>

聚合（has-a）：聚合关系意味着一个类的对象包含另一个类的对象

> 聚合也可以称为“关联”，这种关系的标准符号不易区分
>

继承（is-a）：是一种表示特殊与一般关系

> 继承就是子类继承父类的特征和行为，使得子类对象（实例）具有父类的属性和方法，或子类从父类继承方法，使得子类具有父类相同的行为
>



**注意**：并不是所有的类都具有面向对象特征（Math类）





### 类的设计技巧

1，要保证数据私有

2，要对数据初始化

3，不要使用过多的数据类型

```java
String name;
String bir;
int age;

//这些散的数据可以统一用一个person类封装
```

4，不一定所有的域都需要独立的域访问器和域更改器，有些实例域不希望别人访问到

5，复杂类分解

6，类名和方法名要体现其功能

7，优先使用不可变的类





### 面试题

#### 接口与抽象类的区别？

一个子类只能继承一个抽象类,但能实现多个接口

抽象类可以有构造方法,接口没有构造方法

抽象类可以有普通成员变量,接口没有普通成员变量

抽象类和接口都可有静态成员变量,抽象类中静态成员变量访问类型任意，接口只能public static final(默认)

抽象类可以没有抽象方法,抽象类可以有普通方法,接口中都是抽象方法

抽象类可以有静态方法，接口不能有静态方法

抽象类中的方法可以是public、protected;接口方法只有public abstract



## 对象

对象中的数据称为：实例域

> 对于每个特定的对象都有一组特定的实例域值，这些值的集合就是这个对象的当前状态

### 主要特征

- 对象的行为（可调用的方法定义对象的行为）
- 对象的状态（对象保留着描述当前特征的信息，状态的改变必须通过调用方法实现）
- 对象标识

### 对象的使用

创建对象需要以下三步：

- **声明**：声明一个对象，包括对象名称和对象类型。
- **实例化**：使用关键字new来创建一个对象。
- **初始化**：使用new创建对象时，会调用构造方法初始化对象





### 对象构造



#### 重载

多个方法有相同的名字不同的参数，便产生了重载

#### 构造器

使用构造器构造新的实例，是一种特殊的方法，用来构造并初始化对象

构造器要和类同名，没有返回值，并且总是伴随着new操作一起调用

```java
new Date(); //这就是构造了一个新对象
```



#### 初始化块

> 初始化数据的三种机制
>
> 1，构造器汇中设置
>
> 2，声明中赋值
>
> 3，初始化块



```java
private int id;
private static int nextId;
{
	id = nextId；
    nextId++;
}
//这个时候，无论使用哪个构造器构造对象，id域都会在对象初始化块汇中初始化
//先运行初始化块，然后是构造器主体
```



### 对象和对象变量

```java
Date time; //定义了一个对象变量time，其可以引用Date对象

//值得注意的是这里time不是对象，也没有引用对象（只是可以引用对象）

String str = time.toString;//编译错误，没有初始化
```

注意：

1，一个对象变量并没有实际包含一个对象，仅仅是引用一个对象

2，任何对象变量的值都是对存储在另外一个地方的一个对象的引用

```java
Date time = new Date();
Date t = time;
//两个变量同时引用一个对象
```





## 方法

> 操纵数据的过程称为方法

方法是用于操作对象以及存取他们的实例域

### 解刨方法

方法的第一个参数为隐式参数，是出现在方法名前的类对象

方法的第二个参数是在括号中的数值，称为显式参数

在每一个方法中，关键字this表示隐式参数





### 构造方法

- 每个类都有构造方法。
- 如果没有显式地为类定义构造方法（没有定义任何构造函数），Java编译器（JVM）将会为该类提供一个默认构造方法
- 执行会将所有的实例域设置为默认值
- 构造方法不能被对象调用，只会创建对象，使用new关键字

调用另一个构造器（this）

```java
public A(){
	this("对应构造器的参数");
}
```

构造方法有什么作用？

> 答：构造方法主要作用是完成对类对象的初始化工作。

特点：

1. 名字与类名相同。
2. 没有返回值，但不能用 void 声明构造函数。
3. 生成类的对象时自动执行，无需调用。
4. 可以重载，不能重写



### 私有方法

不会被外部的其他类操作调用

```java
private void reset(){}
```



### 静态方法

1，静态方法是一种不能面向对象实施操作的方法，没有隐式参数（即没有this参数），

2，没有实例域（因为不能操作对象），但是可以访问自身类中的静态域

3，也可以称为类方法

4，一般通过类名调用静态方法，可以使用对象调用静态方法（ 不推荐），但需要是该类的对象，通常在**工具类**中使用类调用静态方法



  **使用静态方法的情况**：

​    一个方法不需要访问对象的状态，所需要的参数都是显式参数提供

​    一个方法只需要访问类的静态域



#### 静态域

每一个对象都有对于所有的实例域都有自己的一份拷贝

```java
class A {
	private int nextId = 1;
	private int Id;
}

//每个A对象都有一个自己的id域，但是这个类的所有实例都共享一个nextId域
```

#### 静态/非静态方法

静态方法是属于类的，在类加载的时候就会分配内存，可以通过类名直接访问。

而非静态成员属于实例对象，只有在对象实例化之后才存在，然后通过类的实例对象去访问。

在类的非静态成员不存在的时候静态成员就已经存在了，此时调用在内存中还不存在的非静态成员，属于非法操作。



### 方法参数

1，方法的名字和参数都称为方法的签名

#### 按值调用

表示方法接收的是调用者提供的值

> 按引用调用：接收的是调用者提供的变量地址

```java
public static void reset(int value) {
        value = 0;
    }

    public static void main(String[] args) {
        int value = 100;
        System.out.println(value);//100

        reset(value);
        System.out.println(value);//100
    }
//但是参数为对象时，得到的是对象引用的拷贝，对象引用及拷贝同时引用同一个对象
```



#### 隐式参数和显示参数

```java
public static void reset(int value) {
	value = 0;
}
```

方法有两个参数

第一个参数称为隐式（implicit）参数，是出现在方法名前

第二个参数位于方法名后括号中的数值，是一个显示参数

```java
public static void reset() {
	this.value
}
```







## 包

java允许使用包将类组织起来，使用包的主要原因是确保类的唯一性

### 导包

```java
import java.uilt.*;
```

### 将类放入包中

```java
package tt.demo;
```

### 包的作用域





code 的规定，这是不可能的。