# 面试题

`Redis`为什么快

- `Redis`是基于内存的，内存的读写速度非常快
- `Redis`是单线程的（新版本`6.0`已经替换成了多线程IO）
  - 省去了很多上下文切换线程的时间
  - 不用去考虑各种锁的问题，不存在加锁释放锁操作，没有因为可能出现死锁而导致的性能消耗
  - 弊端：无法发挥多核CPU性能，不过可以通过在单机开多个`Redis`实例来完善

> 那么 Redis 为什么要选择单线程？又为什么要换成多线程？
>
> - Redis的性能瓶颈主要是网络IO，因此，Redis6.0开始，采用多个IO线程来处理网络请求，提高网络请求处理的并行度

- `Redis`使用多路复用技术，可以处理并发的连接
  - 多路复用主要有三种技术：select，poll，epoll。epoll是的也是目前的多路复用技术。
- 高效的`Redis` 的数据结构，读取速度快
  - 压缩表，对短数据进行压缩存储
  - 跳表，使用有序的数据结构加快读取的速度

> 回答到这里需要掌握 Redis 的相关数据结构实现原理



`Redis`在项目中的使用场景

- 缓存：热点数据

- 数据共享分布式：`Redis`分布式的独立服务，可以在多个应用之间共享
- 分布式锁：`Redission`、`setnx`
- 全局ID：int类型，`incrby`
- 计数器:文章的阅读量、点赞数、允许一定的延迟，先写入Redis再定时同步到数据库
- 限流：超过次数就不允许请求
- 位统计：`String`类型的 `bitcount`(例如：在线用户统计，留存用户统计)
- 购物车：`Hash`（`key`：用户id；`field`：商品id；`value`：商品数量）
- 用户消息时间线`timeline`：`list`，双向链表，直接作为`timeline`就好了
- 消息队列：List提供了两个阻塞的弹出操作：`blpop/brpop`，可以设置超时时间
- 抽奖：随机获得值（`spop myset`）
- 点赞、签到、打卡
- 商品标签
- 商品筛选
- 用户关注、推荐模型
- 排行榜





redis的持久化原理，你们是使用什么方案，为什么

Redis 的大key 问题