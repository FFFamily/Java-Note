周三[5月17日]

- 需要整理发票 Schema 
- 解决 阿尔法2 环境的BUG
  - ~~批量操作BUG~~
    - ~~状态流转校验不正确~~
    - ~~没传 数据的情况~~
  - ~~状态更新~~
    - ~~由于某些功能抽取在一起，导致部分功能没有考虑全面，就会导致某些特定的数据就会报错~~
- 对接 SKIP 接口

> 我有三种情况会去调用保司开票接口
>
> - 发票申请时选择电子发票/重新开票时选择电子发票
> - 保单/批单 承保时选择电子发票
> - 保司开票中

- `List` 接口速度过慢



排期：

- ~~可以尝试在 `List` 方法中去引用其他的 `policy.list` 方法~~
- 有什么方法能够很好的将原本数据库中的信息被输入的信息替换，但又保留某些核心字段不能被修改
  - 可以在写sql的时候if判断
  - 我们的系统中的更新基本逻辑是：get拿到所有信息，然后再通过merge合并不同的信息，再set，由于我们序列化时会将 null 的信息 排除，所以也就完成了移除操作

> 比如说 数据库中的 user: id,name,age,createdAt
>
> 本来的数据信息为：{id : 1 , name : tt ,age : 1,createdAt: xx}
>
> 现在更新数据 前端传来的数据为 {id : 1,name : ss}
>
> 那么更新后的数据因改为：{id: 1,name : ss,createdAt: xx}





周四[5月18日]

日志

- 在解决 调用 node 接口时遇到了 无法调用以及 锁的使用失误导致动态死锁的问题

> 是 nodeClient 中获取 node 实例失败导致的无法调用
>
> 锁的粒度问题导致的死锁



周五[5月19日]

日志

- 在有 oneof 的情况时,并且 oneof 中有 null，执行脚本会生成 3中 setter 方法，在java命中时会不知道该用哪个方法，就会有报错，冲突来源于：Object vs Long
  - setXX(Object object)
  - SetXXNull()
  - setXX(Long value)

在询问问题（假如某处出现了报错），因该将这个问题可能的情况做好统计，该打log的地方先把log打好，追踪到问题处，然后再去询问这个问题可能产生的原因，而不是一味的无脑问。或者自己也可以追踪问题来源，定位问题原因然后再告诉其他人定点解决（这也是自己比较不忙的时候）



以后如果在承保后没有创建发票，肯定就是