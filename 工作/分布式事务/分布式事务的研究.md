入门开篇文章（Saga分布式事务解决方案与实践）：https://servicecomb.apache.org/cn/docs/distributed-transactions-saga-implementation/





实现方式：最终的理想实现方式就是在api这层调用，其他的都不用管，我只需要告诉事务的生效边界，在这里边界中都会涉及到事物处理。对于微服务方，如果api方告诉了微服务这是涉及到事务，那么整个微服务的处理

是想做到单独抽取出来

还是结合业务框架来实现，依此解决技术问题

一个思路就是：

1，定义一个 `TransactionTemplate` 来实现事务边界的定义，并且构建出事务失效的一个补偿操作，负责解析构建出事务树

2，在执行Service、db操作时，传递相关的事务ID以及子事务ID。同时对应的服务也需要开启事务，没有开启世界默认成功（除非报错）

3，成功则回调给 `TransactionTemplate`  失败则本地回滚然后告诉给 `TransactionTemplate` 已经失败。其他的 微服务 若调用成功回调时，`TransactionTemplate` 会拒收，然后微服务进入回滚状态。

> 回滚成功也会通知给 `TransactionTemplate`

4，若`TransactionTemplate` 所监听的所有微服务调用都成功，那么 `TransactionTemplate` 会 commit

5，如果有失败情况，那么 `TransactionTemplate` 就会进行补偿操作。当然这样的补偿也是异步的、





